{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { GAME_STATES } from '../constants/gameConstants';\nexport const useGameEffects = ({\n  gameState,\n  direction,\n  moveShiro,\n  powerMode,\n  powerModeTimer,\n  setPowerMode,\n  setPowerModeTimer,\n  setGhosts,\n  setGameTime,\n  gameLoopRef,\n  powerModeRef\n}) => {\n  _s();\n  // Game loop principal\n  useEffect(() => {\n    if (gameState === GAME_STATES.PLAYING) {\n      gameLoopRef.current = setInterval(() => {\n        if (direction.x !== 0 || direction.y !== 0) {\n          moveShiro(direction);\n        }\n      }, 150);\n    } else {\n      clearInterval(gameLoopRef.current);\n    }\n    return () => clearInterval(gameLoopRef.current);\n  }, [gameState, direction, moveShiro, gameLoopRef]);\n\n  // Timer del juego\n  useEffect(() => {\n    if (gameState === GAME_STATES.PLAYING) {\n      const timer = setInterval(() => setGameTime(t => t + 1), 1000);\n      return () => clearInterval(timer);\n    }\n  }, [gameState, setGameTime]);\n\n  // Timer del modo poder\n  useEffect(() => {\n    if (powerMode && powerModeTimer > 0) {\n      powerModeRef.current = setTimeout(() => {\n        setPowerModeTimer(t => t - 100);\n      }, 100);\n    } else if (powerMode && powerModeTimer <= 0) {\n      setPowerMode(false);\n      setGhosts(prevGhosts => prevGhosts.map(ghost => ({\n        ...ghost,\n        mode: 'chase'\n      })));\n    }\n    return () => clearTimeout(powerModeRef.current);\n  }, [powerMode, powerModeTimer, setPowerMode, setPowerModeTimer, setGhosts, powerModeRef]);\n};\n_s(useGameEffects, \"ewq31d5h+FnD/qJW52w5UqeNMN4=\");","map":{"version":3,"names":["useEffect","GAME_STATES","useGameEffects","gameState","direction","moveShiro","powerMode","powerModeTimer","setPowerMode","setPowerModeTimer","setGhosts","setGameTime","gameLoopRef","powerModeRef","_s","PLAYING","current","setInterval","x","y","clearInterval","timer","t","setTimeout","prevGhosts","map","ghost","mode","clearTimeout"],"sources":["C:/Users/usuario/Downloads/juego/src/hooks/useGameEffects.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { GAME_STATES } from '../constants/gameConstants';\n\nexport const useGameEffects = ({\n  gameState,\n  direction,\n  moveShiro,\n  powerMode,\n  powerModeTimer,\n  setPowerMode,\n  setPowerModeTimer,\n  setGhosts,\n  setGameTime,\n  gameLoopRef,\n  powerModeRef\n}) => {\n  // Game loop principal\n  useEffect(() => {\n    if (gameState === GAME_STATES.PLAYING) {\n      gameLoopRef.current = setInterval(() => {\n        if (direction.x !== 0 || direction.y !== 0) {\n          moveShiro(direction);\n        }\n      }, 150);\n    } else {\n      clearInterval(gameLoopRef.current);\n    }\n    return () => clearInterval(gameLoopRef.current);\n  }, [gameState, direction, moveShiro, gameLoopRef]);\n\n  // Timer del juego\n  useEffect(() => {\n    if (gameState === GAME_STATES.PLAYING) {\n      const timer = setInterval(() => setGameTime(t => t + 1), 1000);\n      return () => clearInterval(timer);\n    }\n  }, [gameState, setGameTime]);\n\n  // Timer del modo poder\n  useEffect(() => {\n    if (powerMode && powerModeTimer > 0) {\n      powerModeRef.current = setTimeout(() => {\n        setPowerModeTimer(t => t - 100);\n      }, 100);\n    } else if (powerMode && powerModeTimer <= 0) {\n      setPowerMode(false);\n      setGhosts(prevGhosts => \n        prevGhosts.map(ghost => ({ ...ghost, mode: 'chase' }))\n      );\n    }\n    return () => clearTimeout(powerModeRef.current);\n  }, [powerMode, powerModeTimer, setPowerMode, setPowerModeTimer, setGhosts, powerModeRef]);\n};"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,QAAQ,4BAA4B;AAExD,OAAO,MAAMC,cAAc,GAAGA,CAAC;EAC7BC,SAAS;EACTC,SAAS;EACTC,SAAS;EACTC,SAAS;EACTC,cAAc;EACdC,YAAY;EACZC,iBAAiB;EACjBC,SAAS;EACTC,WAAW;EACXC,WAAW;EACXC;AACF,CAAC,KAAK;EAAAC,EAAA;EACJ;EACAd,SAAS,CAAC,MAAM;IACd,IAAIG,SAAS,KAAKF,WAAW,CAACc,OAAO,EAAE;MACrCH,WAAW,CAACI,OAAO,GAAGC,WAAW,CAAC,MAAM;QACtC,IAAIb,SAAS,CAACc,CAAC,KAAK,CAAC,IAAId,SAAS,CAACe,CAAC,KAAK,CAAC,EAAE;UAC1Cd,SAAS,CAACD,SAAS,CAAC;QACtB;MACF,CAAC,EAAE,GAAG,CAAC;IACT,CAAC,MAAM;MACLgB,aAAa,CAACR,WAAW,CAACI,OAAO,CAAC;IACpC;IACA,OAAO,MAAMI,aAAa,CAACR,WAAW,CAACI,OAAO,CAAC;EACjD,CAAC,EAAE,CAACb,SAAS,EAAEC,SAAS,EAAEC,SAAS,EAAEO,WAAW,CAAC,CAAC;;EAElD;EACAZ,SAAS,CAAC,MAAM;IACd,IAAIG,SAAS,KAAKF,WAAW,CAACc,OAAO,EAAE;MACrC,MAAMM,KAAK,GAAGJ,WAAW,CAAC,MAAMN,WAAW,CAACW,CAAC,IAAIA,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC;MAC9D,OAAO,MAAMF,aAAa,CAACC,KAAK,CAAC;IACnC;EACF,CAAC,EAAE,CAAClB,SAAS,EAAEQ,WAAW,CAAC,CAAC;;EAE5B;EACAX,SAAS,CAAC,MAAM;IACd,IAAIM,SAAS,IAAIC,cAAc,GAAG,CAAC,EAAE;MACnCM,YAAY,CAACG,OAAO,GAAGO,UAAU,CAAC,MAAM;QACtCd,iBAAiB,CAACa,CAAC,IAAIA,CAAC,GAAG,GAAG,CAAC;MACjC,CAAC,EAAE,GAAG,CAAC;IACT,CAAC,MAAM,IAAIhB,SAAS,IAAIC,cAAc,IAAI,CAAC,EAAE;MAC3CC,YAAY,CAAC,KAAK,CAAC;MACnBE,SAAS,CAACc,UAAU,IAClBA,UAAU,CAACC,GAAG,CAACC,KAAK,KAAK;QAAE,GAAGA,KAAK;QAAEC,IAAI,EAAE;MAAQ,CAAC,CAAC,CACvD,CAAC;IACH;IACA,OAAO,MAAMC,YAAY,CAACf,YAAY,CAACG,OAAO,CAAC;EACjD,CAAC,EAAE,CAACV,SAAS,EAAEC,cAAc,EAAEC,YAAY,EAAEC,iBAAiB,EAAEC,SAAS,EAAEG,YAAY,CAAC,CAAC;AAC3F,CAAC;AAACC,EAAA,CAjDWZ,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}